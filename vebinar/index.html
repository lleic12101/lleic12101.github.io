<!DOCTYPE html>
<html lang="en">
<head>
    <title>document project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<header>
    <div class="row__between">
        <div class="header__logo"><a href="#!"><img src="./img/logo.png" alt="logo"></a></div>
        <div class="watcher__headerBtnsBlock">
            <div class="watcher__headerBtnBlock">
                <div class="header__menu"><i class="fas fa-bars"></i></div>
            </div>
            <div class="watcher__headerBtnBlock watcher__headerBtnBlock-active"  id="btnMobLive">
                <i class="fas fa-podcast"></i>
            </div>
            <div class="watcher__headerBtnBlock"  id="btnMobOld">
                <i class="fas fa-video"></i>
            </div>
            <div class="watcher__headerBtnBlock"  id="btnMobShare">
                <i class="fas fa-share-alt"></i>
            </div>
        </div>
        <div class="header__watcher">
            <p class="header__watcherText">ЗВОНИМ</p>
            <i class="fas fa-phone-square header__watcherPhone"></i>
        </div>
        <div class="watcher__headerSocialItems-mobile">
            <div class="watcher__headerSocialItems">
                <a href="#" class="watcher__headerSocialItem"><img src="img/fb.png" alt="fb" /></a>
                <a href="#" class="watcher__headerSocialItem"><img src="img/vk.png" alt="vk" /></a>
                <a href="#" class="watcher__headerSocialItem"><img src="img/tg.png" alt="rg" /></a>
                <a href="#" class="watcher__headerSocialItem"><img src="img/insta.png" alt="insta" /></a>
                <a href="#" class="watcher__headerSocialItem"><img src="img/wtsapp.png" alt="wtsapp" /></a>
            </div>
        </div>
    </div>
    <div class="row__end header__log">
        <ul>
            <li><a href="#!">Вход / Регистрация</a></li>
        </ul>
    </div>
</header>
<div class="watcher__header">
    <div class="watcher__headerContent">
        <div class="watcher__headerBtns">
            <div class="watcher__headerBtn watcher__headerBtn-active" id="btnLive">
                <i class="fas fa-podcast"></i>
                <p>ПРЯМАЯ ТРАНСЛЯЦИЯ</p>
                <span class="watcher__headerBtnUnder"></span>
            </div>
            <div class="watcher__headerBtn" id="btnOld">
                <p>ЗАПИСЬ ЛЕКЦИИ</p>
            </div>
        </div>
        <div class="watcher__headerSocialItems">
            <a href="#" class="watcher__headerSocialItem"><img src="img/fb.png" alt="fb" /></a>
            <a href="#" class="watcher__headerSocialItem"><img src="img/vk.png" alt="vk" /></a>
            <a href="#" class="watcher__headerSocialItem"><img src="img/tg.png" alt="rg" /></a>
            <a href="#" class="watcher__headerSocialItem"><img src="img/insta.png" alt="insta" /></a>
            <a href="#" class="watcher__headerSocialItem"><img src="img/wtsapp.png" alt="wtsapp" /></a>
        </div>
    </div>
</div>
<div class="watcher__headerSocialClick"></div>
<div class="container">
    <div class="watcher__tab watcher__tab-active" id="watcTab1">
        <div class="wrapper__content row__between">
            <div class="watcher">
                <div class="video">
                    <video poster="./img/video-preview.png">
                        <source src="">
                    </video>
                    <div class="video__control">
                        <div class="control__logo"><a href="#!"><img src="./img/logo-chanel.png" alt="logo chanel" draggable="false"></a></div>
                        <div class="control__options row__between">
                            <ul class="row">
                                <li class="option__item"><i class="fas fa-volume-up"></i></li>
                                <li class="option__item option__item-camera"><i class="fas fa-video"></i></li>
                                <li class="option__item option__item-stop"><i class="fas fa-play"></i></li>
                            </ul>
                            <ul>
                                <li class="option__item option__item-full"><i class="fas fa-expand"></i></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="watcher__block">
                    <div class="watcher__blockItem watcher__blockItem-active" id="blockItem1">
                        <div class="watcher__blockHeader">
                            <p class="watcher__blockHeaderText">ЗВОНКИ В ЭФИР РАЗРЕШЕНЫ</p>
                        </div>
                        <div class="watcher__blockContent">
                            <p class="watcher__text">
                                Звонок по видеосвязи, доступен тем, кто внес от 20 донат.
                                Ответ на Ваш вопрос станет частью обсуждения данной трансляции.
                            </p>
                            <div class="watcher__buttonBlock">
                                <button class="watcher__button watcher__button-call">ПОЗВОНИТЬ</button>
                                <p class="watcher__buttonBlockText watcher__buttonBlockText-dots">Дозваниваемся</p>
                            </div>
                        </div>
                    </div>
                    <div class="watcher__blockItem" id="blockItem2">
                        <div class="watcher__blockHeader">
                            <p class="watcher__blockHeaderText">ЗВОНКИ В ЭФИР РАЗРЕШЕНЫ</p>
                        </div>
                        <div class="watcher__blockContent">
                            <p class="watcher__text">
                                Звонок по видеосвязи, доступен тем, кто внес от 20 донат.
                                Ответ на Ваш вопрос станет частью обсуждения данной трансляции.
                            </p>
                            <div class="watcher__buttonBlock">
                                <button class="watcher__button watcher__button-disabled" disabled>ПОЗВОНИТЬ</button>
                                <p class="watcher__buttonBlockText">Линия занята</p>
                            </div>
                        </div>
                    </div>
                    <div class="watcher__blockItem" id="blockItem3">
                        <div class="watcher__blockHeader">
                            <p class="watcher__blockHeaderText">ЗВОНКИ В ЭФИР РАЗРЕШЕНЫ</p>
                        </div>
                        <div class="watcher__blockContent">
                            <p class="watcher__text-big">
                                Вы разговариваете с публикатором
                            </p>
                            <div class="watcher__buttonBlock">
                                <button class="watcher__button watcher__button-stop">ЗАКОНЧИТЬ</button>
                                <p class="watcher__buttonBlockText watcher__buttonBlockText-bold">00:12:45</p>
                            </div>
                        </div>
                    </div>
                    <div class="watcher__blockItem" id="blockItem4">
                        <div class="watcher__blockHeader watcher__blockHeader-disabled">
                            <p class="watcher__blockHeaderText">ЗВОНКИ В ЭФИР ЗАПРЕЩЕНЫ</p>
                        </div>
                        <div class="watcher__blockContent">
                            <p class="watcher__blockContentClosedText">
                                Публикатор ограничил звонки в эфир. Когда возможность возобновится,
                                справа появится соответствующая кнопка
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Этот код для демонстрации, его нужно убрать после просмотра -->
                <div class="switcher">
                    <a class="switcher__btn switcher__btn-before"><</a>
                    <a class="switcher__btn switcher__btn-next">></a>
                </div>
                <script type="text/javascript">
                    var watcherItems = document.querySelectorAll('.watcher__blockItem');
                    var watcherBeforeBtn = document.querySelector('.switcher__btn-before');
                    var watcherNextBtn = document.querySelector('.switcher__btn-next');
                    var watcherNumber = 0;

                    watcherBeforeBtn.addEventListener("click", function () {
                        if(watcherNumber != 0) watcherNumber--;
                        else watcherNumber = watcherItems.length-1;
                        showWatcherItem(watcherNumber);
                    });
                    watcherNextBtn.addEventListener("click", function () {
                        if(watcherNumber < watcherItems.length-1) watcherNumber++;
                        else watcherNumber = 0;
                        showWatcherItem(watcherNumber);
                    });

                    function showWatcherItem (num) {
                        for(var i = 0; i < watcherItems.length; i++) {
                            watcherItems[i].classList.remove('watcher__blockItem-active');
                        }
                        watcherItems[num].classList.add('watcher__blockItem-active');
                    }
                </script>
                <!-- Этот код для демонстрации, его нужно убрать после просмотра -->

            </div>
            <div class="chat__wrapper chat__wrapper-watcher">
                <div class="chat">
                    <div class="chat__header">
                        <p>На стриме присутствуют: <span>279</span></p>
                    </div>
                    <div class="chat__body chat__body-watcher">
                        <ul>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                            <li>
                                <div class="messages"><span class="name">Андрей</span><span class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></div>
                            </li>
                        </ul>
                    </div>
                    <div class="chat__footer">
                        <div class="user"><span class="name">Андрей</span></div>
                        <div class="form" action="#!">
                            <div class="row">
                                <textarea class="input-message" type="text" placeholder="Добавить комментарий"></textarea><span class="counter-symbol"><span class="counter">0 </span>/ 250</span>
                            </div>
                            <div class="send">
                                <button class="send-message"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="watcher__tab" id="watcTab2">
        <div class="watcher__oldItems">
            <div class="watcher__oldItem">
                <div class="watcher__oldItemVideoBlock video"><img src="img/video-preview.png" alt="video" ></div>
                <div class="watcher__oldItemTextBlock">
                    <p class="watcher__oldItemHeadline">Часть 1</p>
                    <p class="watcher__oldItemText">Вопросы - ответы на тему лекции: Мир после коронавируса, новый мировой порядок.</p>
                </div>
            </div>
            <div class="watcher__oldItem">
                <div class="watcher__oldItemVideoBlock video"><img src="img/video-preview.png" alt="video" ></div>
                <div class="watcher__oldItemTextBlock">
                    <p class="watcher__oldItemHeadline">Часть 2</p>
                    <p class="watcher__oldItemText">Вопросы - ответы на тему лекции: Мир после коронавируса, новый мировой порядок.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="container__video">
        <div class="description__video">
            <div class="video__link"><a href="#!">Архив записей - </a><a href="#!">Будущие стримы - </a><a href="#!">Прошедшие стримы </a></div>
            <div class="video__title">
                <h3>Успех в эпоху коммунизма</h3>
            </div>
            <div class="video__description">
                <p>Давно выяснено, что при оценке дизайна и композиции читаемый текст мешает сосредоточиться. Lorem Ipsum используют потому, что тот обеспечивает более или менее стандартное заполнение шаблона, а также реальное распределение букв и пробелов в абзацах, которое не получается при простой дубликации "Здесь ваш текст.. Здесь ваш текст.. Здесь ваш текст.." Многие программы электронной вёрстки и редакторы HTML используют Lorem Ipsum в качестве текста по умолчанию, так что поиск по ключевым словам "lorem ipsum" сразу показывает, как много веб-страниц всё ещё дожидаются своего настоящего рождения.</p>
            </div>
        </div>
    </div>
</div>
<div class="response__content">
    <div class="content__log">
        <ul>
            <li><a href="#!">Вход / </a></li>
            <li><a href="#!">Регистрация</a></li>
        </ul>
    </div>
    <div class="container__video">
        <div class="description__video">
            <div class="video__link"><a href="#!">Архив записей - </a><a href="#!">Будущие стримы - </a><a href="#!">Прошедшие стримы </a></div>
            <div class="video__title">
                <h3>Успех в эпоху коммунизма</h3>
            </div>
            <div class="video__description">
                <p>Давно выяснено, что при оценке дизайна и композиции читаемый текст мешает сосредоточиться. Lorem Ipsum используют потому, что тот обеспечивает более или менее стандартное заполнение шаблона, а также реальное распределение букв и пробелов в абзацах, которое не получается при простой дубликации "Здесь ваш текст.. Здесь ваш текст.. Здесь ваш текст.." Многие программы электронной вёрстки и редакторы HTML используют Lorem Ipsum в качестве текста по умолчанию, так что поиск по ключевым словам "lorem ipsum" сразу показывает, как много веб-страниц всё ещё дожидаются своего настоящего рождения.</p>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    const body = document.querySelector('body');
    const header = document.querySelector('header')
    const container = document.querySelector('.container')
    const input = document.querySelector('.input-message')
    const sendButton = document.querySelector('.send-message')
    const counterSymbol = document.querySelector('.counter-symbol .counter')
    const chatWrapp = document.querySelector('.chat__wrapper')
    const chatBody = document.querySelector('.chat__body')
    const contentWrapp = document.querySelector('.wrapper__content')
    const chatList = chatBody.querySelector('ul')
    const chatFooter = document.querySelector('.chat__wrapper .chat .chat__footer')
    const video = document.querySelector('.video')
    const videoControlFull = video.querySelector('.option__item-full')
    const userName = document.querySelector('.chat__footer .user .name').textContent
    const responseContent = document.querySelector('.response__content')
    const menu = document.querySelector('.header__menu i')
    const textVideo = document.querySelector('.container__video')

    menu.addEventListener('click', function() {
        this.classList.toggle('fa-times');
        this.parentNode.parentNode.classList.toggle('watcher__headerBtnBlock-active');
        responseContent.classList.toggle('response__content-active')
        chatWrapp.classList.toggle('chat__wrapper-hide');
        body.classList.toggle('body-offScroll');
    })

    input.addEventListener('input', function() {
        counterSymbol.textContent = this.value.length + ' '
        if (this.value.length >= 250) {
            this.classList.add('error')
            document.querySelector('.counter-symbol').classList.add('error')
            sendButton.disabled = true
        } else {
            this.classList.remove('error')
            document.querySelector('.counter-symbol').classList.remove('error')
            sendButton.disabled = false
        }
    })

    const sendMessage = () => {
        if (input.value.length === 0) {
            return false
        }
        if (!(input.value.length >= 250)) {
            chatList.innerHTML += `
                  <li>
                      <div class="messages">
                          <span class="name">${userName}</span>
                          <span class="text">${input.value}</span>
                      </div>
                  </li>
              `
            chatBody.scrollTo({ top: chatList.offsetHeight, behavior: 'smooth' })
            input.value = ''
            counterSymbol.textContent = '0 '
        }
    }

    sendButton.addEventListener('click', () => {
        sendMessage()
    })
    input.addEventListener('keydown', (e) => {
        if (e.keyCode === 13) {
        sendMessage()
    }
    })

    videoControlFull.addEventListener('click', function() {
        const el = this.querySelector('i')

        header.classList.toggle('hide')
        chatWrapp.classList.toggle('chat__wrapper-hide')
        container.classList.toggle('container-fluid')
        textVideo.classList.toggle('container__video-hide')
        video.classList.toggle('video-full')


        if (el.classList.contains('fa-expand')) {
            el.classList.remove('fa-expand')
            el.classList.add('fa-compress')
        } else {
            el.classList.remove('fa-compress')
            el.classList.add('fa-expand')
        }
    })

    var watcherBlock = document.querySelector('.watcher__block');
    var chatHeader = document.querySelector('.chat__header');
    var chatBodyWatcher = document.querySelector('.chat__body-watcher');

    if(window.innerWidth > 736){
        var chatBodyHeight = (24 + video.clientHeight + watcherBlock.clientHeight) - chatHeader.clientHeight - chatFooter.clientHeight - 4;
        chatBodyWatcher.style.height = chatBodyHeight + 'px';
    }

    var callBtn = document.querySelector('.watcher__button-call');
    callBtn.addEventListener("click", function () {
        document.querySelector('.watcher__buttonBlockText-dots').style.opacity = 1;
    });

    var liveBtn = document.querySelector("#btnLive");
    var oldBtn = document.querySelector("#btnOld");
    var watchTab1 = document.querySelector('#watcTab1');
    var watchTab2 = document.querySelector('#watcTab2');
    liveBtn.addEventListener("click", function () {
       this.classList.add("watcher__headerBtn-active");
       oldBtn.classList.remove("watcher__headerBtn-active");
       watchTab1.classList.add("watcher__tab-active");
       watchTab2.classList.remove("watcher__tab-active");
    });
    oldBtn.addEventListener("click", function () {
        this.classList.add("watcher__headerBtn-active");
        liveBtn.classList.remove("watcher__headerBtn-active");
        watchTab2.classList.add("watcher__tab-active");
        watchTab1.classList.remove("watcher__tab-active");
    });

    var buttonMobLive = document.querySelector('#btnMobLive');
    var buttonMobOld = document.querySelector('#btnMobOld');
    var buttonMobShare = document.querySelector('#btnMobShare');
    var mobShareBlock = document.querySelector('.watcher__headerSocialItems-mobile');
    var mobShareHover = document.querySelector('.watcher__headerSocialClick');
    buttonMobLive.addEventListener("click", function () {
        this.classList.add("watcher__headerBtnBlock-active");
        buttonMobOld.classList.remove("watcher__headerBtnBlock-active");
        watchTab1.classList.add("watcher__tab-active");
        watchTab2.classList.remove("watcher__tab-active");
        responseContent.classList.remove('response__content-active');
        chatWrapp.classList.remove('chat__wrapper-hide');
        menu.classList.remove('fa-times');
        menu.parentNode.parentNode.classList.remove('watcher__headerBtnBlock-active');
    });
    buttonMobOld.addEventListener("click", function () {
        this.classList.add("watcher__headerBtnBlock-active");
        buttonMobLive.classList.remove("watcher__headerBtnBlock-active");
        watchTab2.classList.add("watcher__tab-active");
        watchTab1.classList.remove("watcher__tab-active");
        responseContent.classList.remove('response__content-active');
        chatWrapp.classList.remove('chat__wrapper-hide');
        menu.classList.remove('fa-times');
        menu.parentNode.parentNode.classList.remove('watcher__headerBtnBlock-active');
    });
    buttonMobShare.addEventListener("click", function () {
        mobShareBlock.classList.toggle("watcher__headerSocialItems-mobile-active");
        mobShareHover.classList.toggle("watcher__headerSocialClick-active");
        this.classList.toggle('watcher__headerBtnBlock-active');
    });
    mobShareHover.addEventListener("click", function () {
        mobShareHover.classList.remove("watcher__headerSocialClick-active");
        mobShareBlock.classList.remove("watcher__headerSocialItems-mobile-active");
        buttonMobShare.classList.remove('watcher__headerBtnBlock-active');
    });

    var phoneBtn = document.querySelector('.header__watcherPhone');
    phoneBtn.addEventListener("click", function () {
        this.parentNode.classList.toggle('header__watcher-active');
    });
</script>
</body>
</html>